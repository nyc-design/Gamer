# Dual virtual display config for headless NVIDIA GPU
# Two DisplayPort outputs forced as connected, stacked vertically
# Top display (DP-0) = primary/top screen
# Bottom display (DP-2) = secondary/bottom screen

Section "ServerLayout"
    Identifier "DualVirtual"
    Screen 0 "Screen0"
EndSection

Section "Device"
    Identifier "Device0"
    Driver "nvidia"
    BusID "PCI:${NVIDIA_PCI_BUS_ID}"

    # Force two DisplayPort connectors as connected
    Option "ConnectedMonitor" "DP-0, DP-2"

    # Allow arbitrary modes without EDID validation
    Option "UseEDID" "false"
    Option "UseEDIDFreqs" "false"
    Option "ModeValidation" "NoVirtualSizeCheck,NoMaxPClkCheck,NoHorizSyncCheck,NoVertRefreshCheck,AllowNonEdidModes"
    Option "AllowEmptyInitialConfiguration" "true"
EndSection

Section "Screen"
    Identifier "Screen0"
    Device "Device0"
    DefaultDepth 24

    # Two displays stacked vertically (top at 0,0 â€” bottom at 0,1080)
    Option "MetaModes" "DP-0: 1920x1080 +0+0, DP-2: 1920x1080 +0+1080"

    SubSection "Display"
        Depth 24
        Virtual 3840 3840
    EndSubSection
EndSection
